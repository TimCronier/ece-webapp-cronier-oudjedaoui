(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{16473:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/[id]",function(){return n(49882)}])},89268:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(85893),s=n(68214),a=n.n(s);function c(e){var t=e.email;return(0,r.jsx)("img",{src:"https://www.gravatar.com/avatar/"+a()(t),class:"round"})}n(84053)},19678:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(47568),s=n(70655),a=n(85893),c=n(67294),i=n(84053);function u(e){var t=e.id,n=(0,i.useSupabaseClient)(),u=(0,c.useState)(),o=u[0],l=u[1];function d(){return(d=(0,r.Z)(function(){var e,r,a,c,i;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,n.from("profiles").select("username").eq("id",t).single()];case 1:if(r=(e=s.sent()).data,a=e.error,c=e.status,a&&406!==c)throw a;return r&&l(r.username),[3,3];case 2:return i=s.sent(),console.log(i),[3,3];case 3:return[2]}})})).apply(this,arguments)}return(0,c.useEffect)(function(){!function(){return d.apply(this,arguments)}()}),(0,a.jsx)("span",{children:o})}n(89268)},49882:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return d},default:function(){return m}});var r=n(47568),s=n(70655),a=n(85893),c=n(77401),i=n(89268),u=n(67294),o=n(84053),l=n(19678),d=!0;function m(e){var t=e.post,n=(0,o.useSession)(),d=(0,u.useState)(),m=d[0],h=d[1],p=(0,u.useState)(),f=p[0],x=p[1],j=(0,u.useState)(!1),g=j[0],_=j[1],b=(0,u.useState)(),v=b[0],w=b[1];function y(){return(y=(0,r.Z)(function(e){var t,n;return(0,s.__generator)(this,function(r){switch(r.label){case 0:t=e.id,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c.Z.from("comments").delete().eq("id",t)];case 2:return r.sent().data,alert("Your comment was deleted !"),[3,4];case 3:return n=r.sent(),console.log(n),[3,4];case 4:return[2]}})})).apply(this,arguments)}function I(){return(I=(0,r.Z)(function(){var e;return(0,s.__generator)(this,function(r){switch(r.label){case 0:if(!f)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c.Z.from("comments").insert({author_id:n.user.id,content:f,created_at:new Date().toISOString(),article_id:t.id,author_email:n.user.email})];case 2:return r.sent(),[3,4];case 3:return e=r.sent(),console.log(e),[3,4];case 4:return x(null),[3,6];case 5:alert("Your comment cannot be empty !"),r.label=6;case 6:return[2]}})})).apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function(e){var t,n;return(0,s.__generator)(this,function(r){return t=e.content,n=e.id,_(!0),x(t),w(n),[2]})})).apply(this,arguments)}function C(){return(C=(0,r.Z)(function(){var e;return(0,s.__generator)(this,function(t){switch(t.label){case 0:if(!f)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,c.Z.from("comments").upsert({id:v,content:f})];case 2:return t.sent().error,[3,4];case 3:return e=t.sent(),console.log(e),[3,4];case 4:return x(null),_(!1),[3,6];case 5:alert("Your comment cannot be empty !"),t.label=6;case 6:return[2]}})})).apply(this,arguments)}return(0,u.useEffect)(function(){function e(){return(e=(0,r.Z)(function(){var e,n;return(0,s.__generator)(this,function(e){switch(e.label){case 0:return[4,c.Z.from("comments").select("*").eq("article_id",t.id).order("created_at",{ascending:!1})];case 1:return h(e.sent().data),[2]}})})).apply(this,arguments)}!function(){return e.apply(this,arguments)}()}),n?(0,a.jsxs)("div",{style:{minHeight:"81.3vh"},class:"articleWrapper",children:[(0,a.jsx)("p",{class:"articleTitle",children:t.title}),(0,a.jsx)("div",{class:"articleImage",children:(0,a.jsx)("img",{src:t.source,class:"articleImg",style:{width:"600px",height:"600px"}})}),(0,a.jsxs)("div",{class:"articleContent",children:[" ",t.content," "]}),(0,a.jsxs)("div",{class:"globalWrapper",children:[(0,a.jsx)("div",{class:"commentWrapper",children:m?m.map(function(e){return(0,a.jsxs)("div",{class:e.author_id===n.user.id?"commentsAuthor":"comments",children:[(0,a.jsx)("div",{class:"commentImage",children:(0,a.jsx)(i.Z,{email:e.author_email})}),(0,a.jsxs)("div",{class:"commentContent",children:[(0,a.jsx)("span",{class:"commentUsername",children:(0,a.jsx)(l.Z,{id:e.author_id})})," ",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:e.content})," ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{class:"commentDate",children:new Date(e.created_at).getDate()+"/"+(new Date(e.created_at).getMonth()+1)+"/"+new Date(e.created_at).getFullYear()+" | "+(new Date(e.created_at).getHours()+1)%24+":"+new Date(e.created_at).getMinutes()})," ",(0,a.jsx)("br",{}),e.author_id===n.user.id?(0,a.jsx)("button",{onClick:function(){return function(e){return y.apply(this,arguments)}(e)},class:"commentsAuthorEditImage",children:(0,a.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/4662/4662653.png"})}):(0,a.jsx)(a.Fragment,{}),e.author_id===n.user.id?(0,a.jsx)("button",{onClick:function(){return function(e){return Z.apply(this,arguments)}(e)},class:"commentsAuthorEditImage",children:(0,a.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3756/3756522.png"})}):(0,a.jsx)(a.Fragment,{})]})]},e.id)}):(0,a.jsx)(a.Fragment,{})}),(0,a.jsxs)("div",{class:"writeCommentWrapper",children:[(0,a.jsx)("textarea",{placeholder:"Your comment...",value:f||"",onChange:function(e){return x(e.target.value)},class:"writeComment"}),g?(0,a.jsx)("button",{onClick:function(){return function(){return C.apply(this,arguments)}()},class:"submitForm",children:(0,a.jsx)("span",{children:"Edit comment"})}):(0,a.jsx)("button",{onClick:function(){return function(){return I.apply(this,arguments)}()},class:"submitForm",children:(0,a.jsx)("span",{children:"Post comment"})})]})]})]}):(0,a.jsxs)("div",{style:{minHeight:"81.3vh"},class:"articleWrapper",children:[(0,a.jsx)("p",{class:"articleTitle",children:t.title}),(0,a.jsx)("div",{class:"articleImage",children:(0,a.jsx)("img",{src:t.source,class:"articleImg",style:{width:"600px",height:"600px"}})}),(0,a.jsxs)("div",{class:"articleContent",children:[" ",t.content," "]}),(0,a.jsxs)("div",{class:"globalWrapper",children:[(0,a.jsx)("div",{class:"commentWrapper",children:m?m.map(function(e){return(0,a.jsxs)("div",{class:"comments",children:[(0,a.jsx)("div",{class:"commentImage",children:(0,a.jsx)(i.Z,{email:e.author_email})}),(0,a.jsxs)("div",{class:"commentContent",children:[(0,a.jsx)(l.Z,{id:e.author_id})," ",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:e.content})," ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{class:"commentDate",children:new Date(e.created_at).getDate()+"/"+(new Date(e.created_at).getMonth()+1)+"/"+new Date(e.created_at).getFullYear()+" | "+(new Date(e.created_at).getHours()+1)+":"+new Date(e.created_at).getMinutes()})," ",(0,a.jsx)("br",{})]})]},e.id)}):(0,a.jsx)(a.Fragment,{})}),(0,a.jsxs)("div",{class:"writeCommentWrapper",children:[(0,a.jsx)("textarea",{disabled:!0,value:f||"",onChange:function(e){return x(e.target.value)},class:"writeComment"}),(0,a.jsx)("button",{class:"submitFormDisabled",children:(0,a.jsx)("span",{children:"Post comment"})})]})]})]})}},77401:function(e,t,n){"use strict";var r=n(49802);t.Z=(0,r.eI)("https://sdwgogzjpprnyxjqrnua.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNkd2dvZ3pqcHBybnl4anFybnVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzE5MzAwNTcsImV4cCI6MTk4NzUwNjA1N30.6PEfDNipGLEmb9P2-Sbt-qpZJDaT79oH839d9x_bVOM")},42480:function(){}},function(e){e.O(0,[214,774,888,179],function(){return e(e.s=16473)}),_N_E=e.O()}]);