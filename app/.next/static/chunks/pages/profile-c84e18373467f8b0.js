(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{79361:function(e,t){"use strict";t.Z=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},19344:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return r(77995)}])},89268:function(e,t,r){"use strict";r.d(t,{Z:function(){return _}});var n=r(85893),s=r(68214),E=r.n(s);function _(e){var t=e.email;return(0,n.jsx)("img",{src:"https://www.gravatar.com/avatar/"+E()(t),class:"round"})}r(84053)},92162:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=r(79361).Z;Object.defineProperty(t,"__esModule",{value:!0}),t.EDGE_UNSUPPORTED_NODE_APIS=t.RSC_MODULE_TYPES=t.TRACE_OUTPUT_VERSION=t.STATIC_STATUS_PAGES=t.DEFAULT_SANS_SERIF_FONT=t.DEFAULT_SERIF_FONT=t.OPTIMIZED_FONT_PROVIDERS=t.GOOGLE_FONT_PROVIDER=t.SERVER_PROPS_ID=t.STATIC_PROPS_ID=t.PERMANENT_REDIRECT_STATUS=t.TEMPORARY_REDIRECT_STATUS=t.EDGE_RUNTIME_WEBPACK=t.CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL=t.CLIENT_STATIC_FILES_RUNTIME_POLYFILLS=t.CLIENT_STATIC_FILES_RUNTIME_WEBPACK=t.CLIENT_STATIC_FILES_RUNTIME_AMP=t.CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH=t.CLIENT_STATIC_FILES_RUNTIME_MAIN_APP=t.CLIENT_STATIC_FILES_RUNTIME_MAIN=t.MIDDLEWARE_REACT_LOADABLE_MANIFEST=t.MIDDLEWARE_BUILD_MANIFEST=t.FLIGHT_SERVER_CSS_MANIFEST=t.FLIGHT_MANIFEST=t.NEXT_CLIENT_SSR_ENTRY_SUFFIX=t.NEXT_BUILTIN_DOCUMENT=t.MODERN_BROWSERSLIST_TARGET=t.STRING_LITERAL_DROP_BUNDLE=t.CLIENT_STATIC_FILES_RUNTIME=t.CLIENT_STATIC_FILES_PATH=t.CLIENT_PUBLIC_FILES_PATH=t.BLOCKED_PAGES=t.BUILD_ID_FILE=t.CONFIG_FILES=t.SERVERLESS_DIRECTORY=t.SERVER_DIRECTORY=t.FONT_MANIFEST=t.REACT_LOADABLE_MANIFEST=t.DEV_MIDDLEWARE_MANIFEST=t.MIDDLEWARE_MANIFEST=t.DEV_CLIENT_PAGES_MANIFEST=t.SERVER_FILES_MANIFEST=t.IMAGES_MANIFEST=t.ROUTES_MANIFEST=t.PRERENDER_MANIFEST=t.EXPORT_DETAIL=t.EXPORT_MARKER=t.SUBRESOURCE_INTEGRITY_MANIFEST=t.APP_BUILD_MANIFEST=t.BUILD_MANIFEST=t.APP_PATH_ROUTES_MANIFEST=t.APP_PATHS_MANIFEST=t.PAGES_MANIFEST=t.PHASE_TEST=t.PHASE_DEVELOPMENT_SERVER=t.PHASE_PRODUCTION_SERVER=t.PHASE_PRODUCTION_BUILD=t.PHASE_EXPORT=t.COMPILER_INDEXES=t.COMPILER_NAMES=void 0;var E={client:"client",server:"server",edgeServer:"edge-server"};t.COMPILER_NAMES=E;var _=(s(n={},E.client,0),s(n,E.server,1),s(n,E.edgeServer,2),n);t.COMPILER_INDEXES=_,t.PHASE_EXPORT="phase-export",t.PHASE_PRODUCTION_BUILD="phase-production-build",t.PHASE_PRODUCTION_SERVER="phase-production-server",t.PHASE_DEVELOPMENT_SERVER="phase-development-server",t.PHASE_TEST="phase-test",t.PAGES_MANIFEST="pages-manifest.json",t.APP_PATHS_MANIFEST="app-paths-manifest.json",t.APP_PATH_ROUTES_MANIFEST="app-path-routes-manifest.json",t.BUILD_MANIFEST="build-manifest.json",t.APP_BUILD_MANIFEST="app-build-manifest.json",t.SUBRESOURCE_INTEGRITY_MANIFEST="subresource-integrity-manifest",t.EXPORT_MARKER="export-marker.json",t.EXPORT_DETAIL="export-detail.json",t.PRERENDER_MANIFEST="prerender-manifest.json",t.ROUTES_MANIFEST="routes-manifest.json",t.IMAGES_MANIFEST="images-manifest.json",t.SERVER_FILES_MANIFEST="required-server-files.json",t.DEV_CLIENT_PAGES_MANIFEST="_devPagesManifest.json",t.MIDDLEWARE_MANIFEST="middleware-manifest.json",t.DEV_MIDDLEWARE_MANIFEST="_devMiddlewareManifest.json",t.REACT_LOADABLE_MANIFEST="react-loadable-manifest.json",t.FONT_MANIFEST="font-manifest.json",t.SERVER_DIRECTORY="server",t.SERVERLESS_DIRECTORY="serverless",t.CONFIG_FILES=["next.config.js","next.config.mjs"],t.BUILD_ID_FILE="BUILD_ID",t.BLOCKED_PAGES=["/_document","/_app","/_error"],t.CLIENT_PUBLIC_FILES_PATH="public",t.CLIENT_STATIC_FILES_PATH="static",t.CLIENT_STATIC_FILES_RUNTIME="runtime",t.STRING_LITERAL_DROP_BUNDLE="__NEXT_DROP_CLIENT_FILE__",t.MODERN_BROWSERSLIST_TARGET=["chrome 61","edge 16","firefox 60","opera 48","safari 11",],t.NEXT_BUILTIN_DOCUMENT="__NEXT_BUILTIN_DOCUMENT__",t.NEXT_CLIENT_SSR_ENTRY_SUFFIX=".__sc_client__",t.FLIGHT_MANIFEST="flight-manifest",t.FLIGHT_SERVER_CSS_MANIFEST="flight-server-css-manifest",t.MIDDLEWARE_BUILD_MANIFEST="middleware-build-manifest",t.MIDDLEWARE_REACT_LOADABLE_MANIFEST="middleware-react-loadable-manifest";var a="main";t.CLIENT_STATIC_FILES_RUNTIME_MAIN=a;var i="".concat(a,"-app");t.CLIENT_STATIC_FILES_RUNTIME_MAIN_APP=i,t.CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH="react-refresh",t.CLIENT_STATIC_FILES_RUNTIME_AMP="amp",t.CLIENT_STATIC_FILES_RUNTIME_WEBPACK="webpack";var T="polyfills";t.CLIENT_STATIC_FILES_RUNTIME_POLYFILLS=T;var o=Symbol(T);t.CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL=o,t.EDGE_RUNTIME_WEBPACK="edge-runtime-webpack",t.TEMPORARY_REDIRECT_STATUS=307,t.PERMANENT_REDIRECT_STATUS=308,t.STATIC_PROPS_ID="__N_SSG",t.SERVER_PROPS_ID="__N_SSP";var u="https://fonts.googleapis.com/";t.GOOGLE_FONT_PROVIDER=u,t.OPTIMIZED_FONT_PROVIDERS=[{url:u,preconnect:"https://fonts.gstatic.com"},{url:"https://use.typekit.net",preconnect:"https://use.typekit.net"},],t.DEFAULT_SERIF_FONT="Times New Roman",t.DEFAULT_SANS_SERIF_FONT="Arial",t.STATIC_STATUS_PAGES=["/500"],t.TRACE_OUTPUT_VERSION=1,t.RSC_MODULE_TYPES={client:"client",server:"server"},t.EDGE_UNSUPPORTED_NODE_APIS=["clearImmediate","setImmediate","BroadcastChannel","Buffer","ByteLengthQueuingStrategy","CompressionStream","CountQueuingStrategy","DecompressionStream","DomException","MessageChannel","MessageEvent","MessagePort","ReadableByteStreamController","ReadableStreamBYOBRequest","ReadableStreamDefaultController","TextDecoderStream","TextEncoderStream","TransformStreamDefaultController","WritableStreamDefaultController",],("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},77995:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(47568),s=r(70655),E=r(85893),_=r(67294),a=r(84053),i=r(11163),T=r(89268),o=r(50020);function u(e){var t=e.session,r=function(e){var t=e.id;l.push("/editArticles/"+t)},o=(0,a.useSupabaseClient)(),u=(0,a.useUser)(),l=(0,i.useRouter)(),I=(0,_.useState)(!0),S=I[0],c=I[1],R=(0,_.useState)(null),A=R[0],N=R[1],d=(0,_.useState)(null),f=d[0],L=d[1],p=(0,_.useState)(),m=p[0],P=p[1];function C(){return(C=(0,n.Z)(function(){var e,t,r,n,E;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),c(!0),[4,o.from("profiles").select("username, phoneNumber").eq("id",u.id).single()];case 1:if(t=(e=s.sent()).data,r=e.error,n=e.status,r&&406!==n)throw r;return console.log(t),t&&(N(t.username),L(t.phoneNumber)),[3,4];case 2:return E=s.sent(),console.log(E),[3,4];case 3:return c(!1),[7];case 4:return[2]}})})).apply(this,arguments)}function M(){return(M=(0,n.Z)(function(e){var t,r,n,E,_;return(0,s.__generator)(this,function(s){switch(s.label){case 0:t=e.username,r=e.phoneNumber,s.label=1;case 1:return s.trys.push([1,3,4,5]),c(!0),n={id:u.id,username:t,updated_at:new Date().toISOString(),email:u.email,phoneNumber:r},[4,o.from("profiles").upsert(n)];case 2:if(E=s.sent().error)throw E;return alert("Profile updated!"),[3,5];case 3:return _=s.sent(),alert("Error updating the data!"),console.log(_),[3,5];case 4:return c(!1),[7];case 5:return[2]}})})).apply(this,arguments)}function D(){return(D=(0,n.Z)(function(e){var t,r;return(0,s.__generator)(this,function(n){switch(n.label){case 0:t=e.id,n.label=1;case 1:return n.trys.push([1,4,,5]),[4,o.from("comments").delete().eq("article_id",t)];case 2:return n.sent(),[4,o.from("articles").delete().eq("id",t)];case 3:return n.sent(),alert("Your article was deleted !"),[3,5];case 4:return r=n.sent(),console.log(r),[3,5];case 5:return[2]}})})).apply(this,arguments)}return(0,_.useEffect)(function(){(function(){C.apply(this,arguments)})()},[t]),(0,_.useEffect)(function(){function e(){return(e=(0,n.Z)(function(){var e,r;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return[4,o.from("articles").select("*").eq("author_id",t.user.id).order("created_at",{ascending:!1})];case 1:return r=(e=n.sent()).data,e.error,P(r),[2]}})})).apply(this,arguments)}!function(){return e.apply(this,arguments)}()}),(0,E.jsxs)("div",{class:"accountGlobbalWrapper",children:[(0,E.jsxs)("div",{class:"modifyAccount",children:[(0,E.jsx)("div",{class:"middle",children:(0,E.jsx)(T.Z,{email:t?t.user.email:""})}),(0,E.jsx)("br",{}),(0,E.jsx)("label",{htmlFor:"email",children:"Email : "}),(0,E.jsx)("br",{}),(0,E.jsx)("input",{type:"email",value:t?t.user.email:"",disabled:!0}),(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),(0,E.jsx)("label",{htmlFor:"username",children:"Username : "}),(0,E.jsx)("input",{type:"text",value:A||"",onChange:function(e){return N(e.target.value)}}),(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),(0,E.jsx)("label",{htmlFor:"phoneNumber",children:"Phone number : "}),(0,E.jsx)("input",{type:"text",value:f||"",onChange:function(e){return L(e.target.value)}}),(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),(0,E.jsx)("div",{children:(0,E.jsx)("button",{class:"submitForm",onClick:function(){return function(e){return M.apply(this,arguments)}({username:A,phoneNumber:f})},disabled:S,children:S?"Loading ...":"Update"})}),(0,E.jsx)("div",{children:(0,E.jsx)("button",{class:"submitForm",onClick:function(){return o.auth.signOut()},children:"Sign Out"})})]}),(0,E.jsxs)("div",{class:"listArticlesWrapper",children:[(0,E.jsx)("div",{class:"listArticlesTitle",children:(0,E.jsx)("span",{children:"All your articles : "})}),(0,E.jsx)("div",{class:"listArticles",children:m?m.map(function(e){return(0,E.jsxs)("div",{class:"articlesWrap",children:[(0,E.jsx)("p",{children:e.title})," ",(0,E.jsx)("br",{}),(0,E.jsxs)("span",{style:{fontWeight:"200"},children:["Created at : ",new Date(e.created_at).getDate()+"/"+(new Date(e.created_at).getMonth()+1)+"/"+new Date(e.created_at).getFullYear()+" | "+(new Date(e.created_at).getHours()+1)%24+":"+new Date(e.created_at).getMinutes()]}),(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),(0,E.jsx)("button",{onClick:function(){return function(e){return D.apply(this,arguments)}(e)},class:"commentsAuthorEditImage",children:(0,E.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/4662/4662653.png"})}),(0,E.jsx)("button",{onClick:function(){return r(e)},class:"commentsAuthorEditImage",children:(0,E.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3756/3756522.png"})})]})}):(0,E.jsx)(E.Fragment,{})})]})]})}function l(e){var t=(0,i.useRouter)(),r=(0,a.useSession)(),T=(0,a.useSupabaseClient)();return(0,_.useEffect)(function(){function e(){return(e=(0,n.Z)(function(){var e,t,n;return(0,s.__generator)(this,function(s){switch(s.label){case 0:if(!r)return[3,3];return[4,T.from("profiles").select("email").eq("id",r.user.id).single()];case 1:if(t=(e=s.sent()).data,n=e.error)throw n;if(!t.email)return[3,3];return[4,T.from("profiles").update({email:r.user.email}).eq("id",r.user.id)];case 2:s.sent(),s.label=3;case 3:return[2]}})})).apply(this,arguments)}r||t.push("/login"),!function(){return e.apply(this,arguments)}()}),(0,E.jsx)("div",{class:e.darkMode?"lightText ligthBg":"darkText darkBg",children:(0,E.jsx)(u,{session:r,darkMode:e.darkMode})})}o.stringify,o.fromJSON,o.plugin,o.parse,o.list,o.document,o.comment,o.atRule,o.rule,o.decl,o.root,o.CssSyntaxError,o.Declaration,o.Container,o.Processor,o.Document,o.Comment,o.Warning,o.AtRule,o.Result,o.Input,o.Rule,o.Root,o.Node,r(92162)},42480:function(){},22868:function(){},14777:function(){},99830:function(){},70209:function(){}},function(e){e.O(0,[214,20,774,888,179],function(){return e(e.s=19344)}),_N_E=e.O()}]);